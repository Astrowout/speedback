import Head from 'next/head';
import type { GetStaticProps, InferGetStaticPropsType, NextPage } from "next";

import { MarketingLayout } from '../layouts';
import { Cta, Features, Hero } from '../components';
import { ApolloClient, Queries } from '../helpers';

const Home: NextPage = ({ data }: InferGetStaticPropsType<typeof getStaticProps>) => {
	return (
		<MarketingLayout>
			<Head>
				<title>Welcome @ speedback</title>
				<meta name="description" content="Generated by create next app" />
				<link rel="icon" href="/favicon.ico" />
			</Head>

			<main>
				<Hero
					title={data.heroTitle}
					description={data.heroDescription}
					visual={data.heroVisual}
				/>

				<Features
					eyebrow={data.featuresEyebrow}
					title={data.featuresTitle}
					description={data.featuresDescription}
				/>
				<Cta title="Title of the cta" subtitle="subtitle for the cta" />
			</main>
		</MarketingLayout>
	)
}

export const getStaticProps: GetStaticProps = async () => {
	const { data: { landingPage } } = await ApolloClient.query({
		query: Queries.getLandingPage,
	});

	return {
		props: {
			data: landingPage,
		},
	}
}

export default Home;
